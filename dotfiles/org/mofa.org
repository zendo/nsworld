#+STARTUP: show2levels indent hidestars

* sing-box
Windows Tun é˜²ç«å¢™é—®é¢˜ï¼Œéœ€è¦æ‰‹åŠ¨è¿è¡Œä¸€æ¬¡æç¤ºæ”¾è¡Œï¼š
gsudo sing-box run -c coonfig.json

#+begin_src bash
jq 'del(.inbounds[] | select(.type == "tun"))' feiji.json > config.json
sing-box merge -c feiji.json -c sb-tun.json config.json
journalctl -u sing-box -f --output=cat
#+end_src

** GUI.for.SingBox
æ—¥å¿—æ—¶é—´æˆ³ / apiåœ°å€ 9090 / apiå¯†é’¥ 1984 / uiè·¯å¾„ ui / å…è®¸ç§æœ‰ç½‘ç»œè®¿é—®
https://gh-proxy.com/https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip
mixed-in ç›‘å¬åœ°å€æ”¹ :: 7890
å‡ºç«™è®¾ç½®ï¼šğŸš€ èŠ‚ç‚¹é€‰æ‹© ğŸˆ è‡ªåŠ¨é€‰æ‹© åˆ†åˆ«é€‰æ‹©è®¢é˜…èŠ‚ç‚¹
è·¯ç”±è®¾ç½®â€”â€”è§„åˆ™ï¼šåˆ é™¤ reject quic

https://linux.do/t/topic/938696

** inbounds

mtu: The maximum transmission unit.

"listen": "127.0.0.1", : ipv4
"listen": "::", ï¼šipv6

listen_port
sudo lsof -i :7890
netstat -ano | findstr :7890 // windows

*** tun
Defaults to the mixed stack if the gVisor build tag is enabled, otherwise defaults to the system stack.

system ä½¿ç”¨ç³»ç»Ÿåè®®æ ˆï¼Œå¯ä»¥æä¾›æ›´ç¨³å®š/å…¨é¢çš„ tun ä½“éªŒï¼Œä¸”å ç”¨ç›¸å¯¹å…¶ä»–å †æ ˆæ›´ä½
gvisor é€šè¿‡åœ¨ç”¨æˆ·ç©ºé—´ä¸­å®ç°ç½‘ç»œåè®®æ ˆï¼Œå¯ä»¥æä¾›æ›´é«˜çš„å®‰å…¨æ€§å’Œéš”ç¦»æ€§ï¼ŒåŒæ—¶å¯ä»¥é¿å…æ“ä½œç³»ç»Ÿå†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´çš„åˆ‡æ¢ï¼Œä»è€Œåœ¨ç‰¹å®šæƒ…å†µä¸‹å…·æœ‰æ›´å¥½çš„ç½‘ç»œå¤„ç†æ€§èƒ½
mixed æ··åˆå †æ ˆï¼Œtcp ä½¿ç”¨ system æ ˆï¼Œudp ä½¿ç”¨ gvisor æ ˆï¼Œä½¿ç”¨ä½“éªŒå¯èƒ½ç›¸å¯¹æ›´å¥½

#+begin_src json
{
    "type": "tun",
    "tag": "tun-in",
    "address": [
        "172.18.0.1/30",
        "fdfe:dcba:9876::1/126"
    ],
    "auto_route": true,
    "strict_route": true
},
#+end_src

*** mixed
mixed: inbound is a socks4, socks4a, socks5 and http server.

#+begin_src json
{
    "type": "mixed",
    "tag": "mixed-in",
    "listen": "127.0.0.1",
    "listen_port": 7890
}
#+end_src

*** tproxy

#+begin_src json
{
    "type": "tproxy",
    "tag": "tproxy-in",
    "listen": "0.0.0.0",
    "listen_port": 7895
}
#+end_src

** providers
outbounds â€”â€” èŠ‚ç‚¹é€‰æ‹©/è‡ªåŠ¨é€‰æ‹© æ·»åŠ ï¼š

#+begin_src json
"use_all_providers": true,
#+end_src

#+begin_src json
  "providers": [
    {
      "type": "remote",
      "tag": "sub1",
      "url": "",
      "user_agent": "sing-box",
      "download_detour": "ğŸ¯ å…¨çƒç›´è¿",
      "update_interval": "24h",
      "override_dialer": {}
    },
    {
      "type": "remote",
      "tag": "sub2",
      "url": "",
      "user_agent": "sing-box",
      "download_detour": "ğŸ¯ å…¨çƒç›´è¿",
      "update_interval": "24h",
      "override_dialer": {}
    },
    {
      "type": "remote",
      "tag": "sub3",
      "url": "",
      "user_agent": "sing-box",
      "download_detour": "ğŸ¯ å…¨çƒç›´è¿",
      "update_interval": "24h",
      "override_dialer": {}
    }
  ]
#+end_src

** dns

tls: DNS over TLS (DoT)
quic: DNS over QUIC (DoQ)
https: DNS over HTTPS (DoH)
h3: DNS over HTTP3 (DoH3) *recommend*

** experimental
cache_file enabled: required to save rule-set cache.

#+begin_src json
{
  "experimental": {
    "clash_api": {
      "external_controller": "127.0.0.1:9090",
      "external_ui": "ui",
      "external_ui_download_url": "https://gh-proxy.com/https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip",
      "secret": "1984",
      "default_mode": "rule",
      "external_ui_download_detour": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©",
      "access_control_allow_private_network": true,
      "access_control_allow_origin": [
        "http://127.0.0.1",
        "https://yacd.metacubex.one",
        "https://metacubex.github.io",
        "https://metacubexd.pages.dev",
        "https://board.zash.run.place"
      ]
    }
  }
}
#+end_src

** Links
https://sing-box.sagernet.org/zh/configuration/
https://icloudnative.io/posts/sing-box-tutorial/
https://linux.do/t/topic/1164538#p-10270168-sing-box-7

https://github.com/qichiyuhub/sbshell tproxy
https://github.com/Toperlock/sing-box-subscribe æ¨¡æ¿
https://github.com/bestnite/sub2sing-box

* sub-store

å®‰è£…ï¼š
#+begin_src bash
wget https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store.bundle.js
wget https://github.com/sub-store-org/Sub-Store-Front-End/releases/latest/download/dist.zip && unzip dist.zip && rm dist.zip && mv dist frontend
pushd ~/code/sub/sub-store > /dev/null && xdg-open http://127.0.0.1:3000 ; node sub-store.bundle.js & ; popd > /dev/null
#+end_src

æ•™ç¨‹ï¼š
https://linux.do/t/topic/846616

æ–‡ä»¶ç®¡ç† - åˆ›å»ºæ–‡ä»¶ - config.json

æ¨¡æ¿ï¼š
https://raw.githubusercontent.com/zendo/nsworld/refs/heads/main/dotfiles/misc/sb-template.json

è„šæœ¬ï¼š
https://raw.githubusercontent.com/xream/scripts/main/surge/modules/sub-store-scripts/sing-box/template.js#name=liangxin&outbound=%F0%9F%95%B3%E2%84%B9%EF%B8%8F%F0%9F%8E%88%20%E8%87%AA%E5%8A%A8%E9%80%89%E6%8B%A9%F0%9F%95%B3%E2%84%B9%EF%B8%8F%F0%9F%9A%80%20%E8%8A%82%E7%82%B9%E9%80%89%E6%8B%A9&type=%E8%BF%9C%E7%A8%8B%E8%AE%A2%E9%98%85
